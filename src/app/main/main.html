<md-content flex layout-fill>
  <header class="page-header">
    <div class="wrapper">
      <h1 class="md-display-3">Museek</h1>
      <h2 class="md-headline description">Last.fm user's stats.</h2>

      <form name="userForm">
        <div layout-gt-sm="row">
          <md-input-container class="md-block" flex-gt-sm="50">
            <label>Username</label>
            <input ng-model="user">
          </md-input-container>
          <md-input-container class="md-block" flex-gt-sm="30">
            <label>Period</label>
            <md-select ng-model="period">
              <md-option ng-repeat="period in periods">
                {{ period }}
              </md-option>
            </md-select>
          </md-input-container>
          <md-input-container class="md-block" flex-gt-sm="20">
            <label>Limit</label>
            <input name="queryLimit" ng-model="limit" placeholder="Default: 10"
                  min="1" max="100" ng-pattern="/^[0-9]{1,3}$/" md-maxlength="3">
            <div ng-messages="userForm.queryLimit.$error" role="alert" multiple>
              <div ng-message="pattern" class="my-message">That doesn't look like a valid limit.</div>
              <div ng-message="min">Value should be greater than 0</div>
              <div ng-message="max">Value should be less than 100.</div>
            </div>
          </md-input-container>
        </div>
        <md-button class="md-raised md-accent btn-retrieve" ng-click="setUser()">Retrieve</md-button>
      </form>
    </div>
  </header>

  <section class="page-content">
    <div class="wrapper">

      <div ng-show="userInfo" class="user-profile text-center">
        <a href="{{ userInfo.user.url }}" target="_blank">
          <img ng-src="{{ userInfo.user.image[2]['#text'] }}" class="profile" alt="{{ userInfo.user.name }}" />
        </a>

        <a href="{{ userInfo.user.url }}" target="_blank">
          <h1> {{ userInfo.user.realname }} </h1>
        </a>

        <!-- <md-icon><i class="material-icons">access_time</i></md-icon><span> -->
        <p>{{ userInfo.user.playcount | number:0 }} scrobbles</p>
        <p>{{ userTop.topartists['@attr']['total'] | number:0 }} artists</p>
      </div>

      <core-tabs ng-show="userInfo"></core-tabs>

      <div class="user-listbox">
        <md-list-item class="md-2-line" ng-repeat="item in userTop.topartists.artist">
        <a href="{{ item.url }}" target="_blank">
          <img ng-src="{{ item.image[1]['#text'] }}" class="md-avatar md-avatar-56" alt="{{ item.name }}" />
        </a>
          <div class="md-list-item-text">
            <a href="{{ item.url }}" target="_blank">
              <h3>{{ item.name }}</h3>
            </a>
            <p>{{ item.playcount | number:0 }} scrobbles</p>
          </div>

          <div class="md-list-item-text text-right">
            <p>#{{ item['@attr']['rank'] }}</p>
            <p>{{ (item.playcount / userInfo.user.playcount) * 100 | number:2 }}%</p>
          </div>
        </md-list-item>
      </div>
    </div>
  </section>
</md-content>
